import{GlobalWorkerOptions}from"https://cdn.jsdelivr.net/npm/pdfjs-dist@4.5.136/build/pdf.min.mjs";GlobalWorkerOptions.workerSrc="https://cdn.jsdelivr.net/npm/pdfjs-dist@4.5.136/build/pdf.worker.min.mjs";const pdf="document.pdf",pageNum=document.querySelector("#page_num"),pageCount=document.querySelector("#page_count"),currentPage=document.querySelector("#current_page"),previousPage=document.querySelector("#prev_page"),nextPage=document.querySelector("#next_page"),zoomIn=document.querySelector("#zoom_in"),zoomOut=document.querySelector("#zoom_out"),initialState={pdfDoc:null,currentPage:1,pageCount:0,zoom:1};pdfjsLib.getDocument(pdf).promise.then((e=>{initialState.pdfDoc=e,pageCount.textContent=initialState.pdfDoc.numPages,renderPage()})).catch((e=>{alert(e.message)}));const renderPage=()=>{initialState.pdfDoc.getPage(initialState.currentPage).then((e=>{const t=document.querySelector("#canvas"),n=t.getContext("2d"),a=e.getViewport({scale:initialState.zoom});t.height=a.height,t.width=a.width;const i={canvasContext:n,viewport:a};e.render(i),pageNum.textContent=initialState.currentPage}))},showPrevPage=()=>{null===initialState.pdfDoc||initialState.currentPage<=1||(initialState.currentPage--,currentPage.value=initialState.currentPage,renderPage())},showNextPage=()=>{null===initialState.pdfDoc||initialState.currentPage>=initialState.pdfDoc._pdfInfo.numPages||(initialState.currentPage++,currentPage.value=initialState.currentPage,renderPage())};previousPage.addEventListener("click",showPrevPage),nextPage.addEventListener("click",showNextPage),currentPage.addEventListener("keypress",(e=>{if(null===initialState.pdfDoc)return;if(13===(e.keyCode?e.keyCode:e.which)){let e=currentPage.valueAsNumber;initialState.currentPage=Math.min(Math.max(e,1),initialState.pdfDoc._pdfInfo.numPages),currentPage.value=initialState.currentPage,renderPage()}})),zoomIn.addEventListener("click",(()=>{null!==initialState.pdfDoc&&(initialState.zoom*=4/3,renderPage())})),zoomOut.addEventListener("click",(()=>{null!==initialState.pdfDoc&&(initialState.zoom*=2/3,renderPage())}));